<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Display Products</title>
	<style>
		.product-container {
			border: 1px solid green;
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 20px;
			padding: 24px;
		}

		.card {
			border: 1px solid green;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			gap: 4px;
			height: 400px;
			width: 200px;
			padding: 10px;
			overflow: hidden;
		}

		.card img {
			height: 100px;
			width: auto;
			object-fit: cover;
		}
	</style>
</head>

<body>
	<div class="product-container"></div>

	<script>
		const container = document.querySelector('.product-container');

		const getData = async () => {
			try {
				const res = await fetch('get_all_products.php');
				const data = await res.json();
				displayData(data);
			} catch (err) {
				console.error('Fetch failed:', err);
				alert('Error loading products.');
			}
		};

		const displayData = (data) => {
			container.innerHTML = '';

			data.forEach(product => {
				const card = document.createElement('div');
				card.classList.add('card');

				card.innerHTML = `
          <img class="img" src="${product.img_url}" alt="${product.name}">
          <p class="name"><strong>${product.name}</strong></p>
          <p class="description">${product.description}</p>
          <p class="price">â‚±${product.price}</p>
          <p class="quantity">Qty: ${product.quantity}</p>
          <p class="tag">${product.tags}</p>
        `;

				container.appendChild(card);
			});
		};

		// Run on page load
		getData();
	</script>
</body>

</html>